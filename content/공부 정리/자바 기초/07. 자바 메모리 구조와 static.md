---
tags:
  - "#JavaBasic"
---

## ✅ 자바의 메모리 구조와 `static`
### 🔹 1. 자바 메모리 구조 전체 그림
![](https://imgur.com/vPx8jOp.png)

자바 애플리케이션이 실행될 때 JVM은 메모리를 다음 3가지 주요 영역으로 나누어 관리한다:

|영역|설명|
|---|---|
|**메서드(Method) 영역**|클래스(타입) 정보, static 변수, 상수 풀 등 클래스 수준의 데이터 저장|
|**스택(Stack) 영역**|메서드 호출 시 생성되는 **스택 프레임** 저장. 지역 변수, 매개변수, 임시 데이터 등|
|**힙(Heap) 영역**|`new`로 생성된 **객체(instance)** 가 저장됨. 모든 객체는 힙에 존재하며 참조를 통해 접근|

---

### 🔸 1-1. 메서드(Method) 영역

- 클래스별 실행 정보 (생성자, 메서드, 변수 선언 등)
- **static 변수 저장**
- 런타임 상수 풀 저장
- 모든 **클래스 당 한 번만 로딩되며 공유**

📍 **실무 힌트**: static 변수는 메서드 영역에 단 한 번만 로딩되기 때문에 **전역 상태 관리**에 적합하지만, **동시성 주의** 필요

---

### 🔸 1-2. 스택(Stack) 영역

- **메서드 호출 시마다 생성되는 스택 프레임**을 저장
- 각 스레드마다 독립적인 스택을 가짐
- 지역 변수, 매개변수, return 값 저장
- 메서드 종료 시, 해당 스택 프레임 제거

📍 **실무 힌트**: 스택 영역은 매우 빠르지만, **일시적인 데이터만 저장**됨 (함수 종료 시 소멸)

---

### 🔸 1-3. 힙(Heap) 영역

- `new` 키워드로 생성된 객체(인스턴스)는 모두 힙에 저장됨
- 참조 변수는 스택에 저장되고, **실제 객체는 힙에 존재**
- **GC(Garbage Collector)** 가 더 이상 참조되지 않는 객체를 자동 제거

📍 **실무 힌트**: 힙 메모리는 GC 성능과 밀접 → **불필요한 객체 생성을 피하는 설계**가 중요

---

### 🔹 2. `static` 키워드와 메모리 구조

> `static`은 객체가 아니라 **클래스 수준**에서 존재하는 멤버를 의미  
> 따라서 인스턴스와는 **별도로 메서드 영역에 저장**된다.
```java
public class Data3 {
    public String name;         // 인스턴스 변수 → 힙에 저장
    public static int count;    // static 변수 → 메서드 영역에 저장

    public Data3(String name){
        this.name = name;
        count++;  // static 변수는 모든 인스턴스가 공유
    }
}

```

|구분|저장 위치|특징|
|---|---|---|
|**인스턴스 변수**|힙(Heap)|객체마다 개별 저장, `new`로 생성 필요|
|**static 변수**|메서드 영역(Method)|클래스당 1개, 모든 객체가 공유, 인스턴스 없이 사용 가능|
|**지역 변수**|스택(Stack)|메서드 호출 시 생성, 종료되면 소멸|

---

### 실무 요약

|상황|static 사용 여부|
|---|---|
|모든 인스턴스가 공유해야 하는 값|✅ static 적합|
|개별 객체의 고유한 상태를 저장|❌ 인스턴스 변수로 선언|
|유틸성 메서드 (예: `Math.max()`)|✅ static 메서드로 구현|
|상태를 가지는 서비스 로직|❌ static 사용 지양, 인스턴스 설계 필요|
